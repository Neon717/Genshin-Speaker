# Оглавление

- [Описание](#title1)
- [Принцип работы](#title2)
- [Установка](#title3)
- [Использование](#title4)
- [Зависимости](#title6)

***

# <a id=title1> Описание </a>

**GenshinSpeaker** добавляет озвучку текста диалогов. Вне зависимости имеет ли диалог изначально озвучку или нет, программа озвучит его в любом случае. Имеется несколько голосов озвучивания, которые распределены по персонажам.  
Для работы системы требуется интерфейс на **русском языке**, то есть текст диалога должен быть на **русском**.  
Также рекомендуется отключить в самой игре автоматическое переключение диалогов (GenshinSpeaker может не успеть озвучить диалог полностью когда игра уже переключится на следующий).  
**Если вы используете цветовые экранные фильтры, то это не позволит программе правильно определить текст.** 

## Поддерживаемые языки

В данный момент поддерживается только **русский язык**.

## Поддерживаемые платформы

В данный момент поддерживается только операционная система **Windows**. Рекомендуется использовать **Windows 10**.

Исходники проекта написаны на Python 3.9, при этом есть зависимость от проекта [tesseract](https://github.com/tesseract-ocr/tesseract) в его собранном виде под Windows. В теории программу возможно адаптировать и под другие платформы.

***

# <a id=title2> Принцип работы </a>

Вся работа программы основана только на изображении с игры на мониторе. Игра даже может быть не запущена, требуется только изображение (можно развернуть скриншот на весь экран, программе не важно). **GenshinSpeaker** распознаёт на изображении текст диалога, а также имя персонажа в заголовке диалога.

Имя персонажа используется для выбора голоса озвучивания, а распознанный текст диалога отправляется в нейронную сеть озвучивания с выбранным голосом. Нейронная сеть запускается прямо на вашем компьютере, это даёт минимальную задержку в процессе озвучивания. При этом от компьютера не требуется высокой производительности. Если компьютер удовлетворяет минимальным требованиям игры (способен обеспечить больше 30 кадров/сек при минимальных настройках с масштабированием 1:1), то проблем c производительностью быть не должно.

***

# <a id=title3> Установка </a>

Предложено два вида установки:

-   Если желаете просто скачать и пользоваться рекомендуется **собранная версия для Windows.**
-   Если желаете разобраться в работе программы или модифицировать ее, то используйте **исходный код Python.**

## Собранная версия для Windows (рекомендуется для обычных пользователей)

1.  Скачайте ZIP архив по ссылке и распакуйте его в любом удобном месте.
2.  Запустите файл GenshinSpeaker.exe из распакованного архива.

## Исходный код Python (для разработчиков)
<details>
<summary> Развернуть </summary>

1.  Скачивание репозитория:

```Terminal
git clone https://github.com/Neon717/GenshinSpeaker.git
```

2.  Переход в папку репозитория:

```Terminal
cd GenshinSpeaker
```

3.  Установка зависимостей Python:

```Terminal
pip install -r .\requirements.txt
```

4.  Распаковать собранную Windows версию **tesseract** в папку **external**, чтобы получилась следующая структура проекта:

```
GenshinSpeaker/
├─ data\
|  └─ ...
├─ ui\
|  └─ ...
├─ src\
|  ├─ ...
|  ├─ main.py
|  └─ ...
├─ external\
|  ├─ SileroModels\
|  |  └─ ...
|  └─ Tesseract-OCR\
|    ├─ ...
|    ├─ tesseract.exe
|    └─ ...
├─ .gitignore
└─ requirements.txt
```

5.  Запуск приложения (пример для запуска из корневой папки проекта):

```Terminal
python src/main.py
```

</details>

***

# <a id=title4> Использование </a>


Использование программы:
1. Запустите приложение;
2. Дождитесь окончания процесса запуска;
3. Откройте окно с игрой на весь экран (если несколько мониторов, то выберете нужный в настройках GenshinSpeaker).  

Рекомендации: 
1. В настройках самой игры поставить переключение диалогов в ручной режим (когда после окончания реплики игра не переключает сама на следующий диалог)
2. Не использовать экранные цветовые фильтры.

***

# <a id=title6> Зависимости </a>

Ключевые зависимости проекта:

- [opencv-python](https://pypi.org/project/opencv-python/) – для обработки изображений;
- [tesseract](https://github.com/tesseract-ocr/tesseract) - для распознавания текста на изображении;
- [silero-models (text to speech)](https://github.com/snakers4) - для озвучивания текста

<!-- #version: 5.4-1 -->
